'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _is = require('@weo-edu/is');

var _is2 = _interopRequireDefault(_is);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * genit
 */

function flatten(gen) {
  return regeneratorRuntime.mark(function _callee() {
    var it,
        next,
        arg,
        _args = arguments;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          it = _is2.default.generator(gen) ? gen : gen.apply(undefined, _args);
          next = it.next();
          arg = undefined;

        case 3:
          if (next.done) {
            _context.next = 23;
            break;
          }

          _context.prev = 4;

          if (_is2.default.generator(next.value)) {
            _context.next = 11;
            break;
          }

          _context.next = 8;
          return next.value;

        case 8:
          arg = _context.sent;
          _context.next = 15;
          break;

        case 11:
          return _context.delegateYield(flatten(next.value)(arg), 't0', 12);

        case 12:
          _context.next = 14;
          return _context.t0;

        case 14:
          arg = _context.sent;

        case 15:
          next = it.next(arg);
          _context.next = 21;
          break;

        case 18:
          _context.prev = 18;
          _context.t1 = _context['catch'](4);

          next = it.throw(_context.t1);

        case 21:
          _context.next = 3;
          break;

        case 23:
          return _context.abrupt('return', next.value);

        case 24:
        case 'end':
          return _context.stop();
      }
    }, _callee, this, [[4, 18]]);
  });
}

/**
 * Exports
 */

/**
 * Imports
 */

exports.default = flatten;